<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>首屏显性加载</title>
<link rel="stylesheet" href="css/style.css" type="text/css" />
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
</head>
<body>
  <div id="loadingbg">
    <div id="loadingwrap">
      <div id="loading">0%</div>
    </div>
  </div>
	<div class="wrap">
		<img class="bg-img" src="img/1.jpg">
		<img class="bg-img" src="img/2.jpg">
		<img class="bg-img" src="img/3.jpg">
		<img class="bg-img" src="img/4.jpg">
		<img class="bg-img" src="img/5.jpg">
		<img class="bg-img" src="img/6.jpg">
		<img class="bg-img" src="img/7.jpg">
	</div>
</body>
</html>
<script type="text/javascript">
	var loadNum = 0;
	var imgNum = $('.bg-img').length;
	var txtGrad = parseInt(100 / imgNum);
	var bgGrad = parseInt(200 / imgNum);
	$('.bg-img').each(function(){
		if($(this)[0].complete){
			loadNum += 1;
			$("#loading").text(loadNum*txtGrad+"%").width(loadNum*bgGrad+"px")
			if(loadNum>=imgNum){
				$("#loading").text("100%").width("200px");
				$("#loadingbg").animate({opacity:"0"},function(){
					$(this).hide()
				})
			}
		}else{
			$(this).load(function(){
				loadNum += 1;
				$("#loading").text(loadNum*txtGrad+"%").width(loadNum*bgGrad+"px")
				if(loadNum>=imgNum){
					$("#loading").text("100%").width("200px");
					$("#loadingbg").animate({opacity:"0"},function(){
						$(this).hide()
					})
				}
			})
		}
	})
</script>